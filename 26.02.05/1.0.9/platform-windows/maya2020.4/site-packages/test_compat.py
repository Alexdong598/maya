import sys
import os

# Write output to file to avoid PowerShell issues
output_file = open('test_output.txt', 'w')

def write_output(msg):
    output_file.write(msg + '\n')
    print(msg)

write_output("Current directory: " + os.getcwd())
write_output("Test script path: " + os.path.abspath(__file__))
write_output("Package path exists: " + str(os.path.exists('c:/_hal/rez_local_cache/int/maya_dy_plugins/0.6.0/platform-windows/maya2020.4/site-packages/mayaMenuBar')))
write_output("compat.py exists: " + str(os.path.exists('c:/_hal/rez_local_cache/int/maya_dy_plugins/0.6.0/platform-windows/maya2020.4/site-packages/mayaMenuBar/compat.py')))

sys.path.insert(0, 'c:/_hal/rez_local_cache/int/maya_dy_plugins/0.6.0/platform-windows/maya2020.4/site-packages')

try:
    import mayaMenuBar.compat
    write_output("Successfully imported mayaMenuBar.compat")
    write_output("PY2: " + str(mayaMenuBar.compat.PY2))
    write_output("PY3: " + str(mayaMenuBar.compat.PY3))
except ImportError as e:
    write_output("Failed to import mayaMenuBar.compat")
    write_output("Error: " + str(e))
    write_output("sys.path: " + str(sys.path))

output_file.close()
